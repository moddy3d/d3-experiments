<html>
    <head>
        <link href="../static/css/style.css" rel="stylesheet">
        <style>
            .content > text {
                font: 12px monospace;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <a href='../'>back</a>
            <div class='date'>tues feb 15 2015</div>
            <h1 class="title">search index</h1>
            <div class='lead'>documents being indexed by a search engine</div>
            <div id='description'>
                A document goes through several transformations when it is pushed into a search engine.
            </div>
        </div>
        <script src='../static/js/d3.min.js'></script>
        <script>

            var width = 960,
                height = 540,
                margin = {x: 30, y: 30},
                letterSpacing = 6;
            
            var doc = '<strong>A Search Engine is a Software used to search data in the form of text or DATABASE for Specified INFORMATION.</strong>';
            
            var svg = d3.select("body > .container").insert("svg", "#description")
                .attr("width", width)
                .attr("height", height);

            function addTransform(source, transformClass, transform, index) {
                
                var group = svg.append("g")
                    .attr("id", transformClass)
                    .attr('transform', "translate(" + margin.x + "," + margin.y * (index - 1) + ")");
                    
                group.append("g")
                    .classed("stage", true)
                    .append("text")
                        .text(transformClass);

                group.append("g")
                    .classed("content", true)
                    .attr('transform', "translate(" + margin.x * 5 + ",0)");

                group.select("g.content").selectAll("text")
                    .data(source) 
                    .enter()
                    .append("text")
                        .text(function (d) { return d; })
                        .attr("x", function (d, i) { return i * letterSpacing} );

                var output = transform(source);

                return output;
            }


            // Original

            var nothing = function (source) {
                return source;
            }

            doc = addTransform(doc, 'original', nothing, 1)

            // HTML Strip

            var htmlStrip = function (source) {
                return source.replace(/(<[^>]+>)/g, '');
            };
            
            doc = addTransform(doc, 'html-strip', htmlStrip, 2)
            
        </script>
    </body>
</html>
